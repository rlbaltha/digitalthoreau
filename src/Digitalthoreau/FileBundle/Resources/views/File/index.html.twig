{# Digitalthoreau/FileBundle/Resources/views/File/index.html.twig #}

{% extends 'DigitalthoreauFileBundle::layout.html.twig' %}

{% block body -%}
    <h1>File list</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Path</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for xml_file in entities if xml_file.type != 2 %}
            <tr>
                <td><a href="{{ path('file_show', { 'id': xml_file.id }) }}">{{ xml_file.name }}</a></td>
                <td>{{ xml_file.type }}</td>
                <td>{{ xml_file.path }}</td>
                <td>
                <ul class="nav files">
                    <li class="dropdown">
                    <a title="Transformation with xsl" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown" id="dLabel">Transform<b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        {% for xsl_file in entities if xsl_file.type == 2 %}
                            <li><a class='' href="{{ path('file_transform', { 'xml_id': xml_file.id, 'xsl_id': xsl_file.id }) }}">{{ xsl_file.name }}</a></li>
                        {% endfor %}
                       </ul>
                   </li>
                </ul>
                </td>
                <td>
                <ul class="inline">
                    <li>
                        <a  class="" href="{{ path('file_view', { 'id': xml_file.id }) }}">Download</a>
                    </li>
                    <li>
                        <a  class="" href="{{ path('file_show', { 'id': xml_file.id }) }}">Show info</a>
                    </li>
                    <li>
                        <a  class="" href="{{ path('file_edit', { 'id': xml_file.id }) }}">Edit info</a>
                    </li>
                </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

        <ul class="inline">
        <li>
            <a class="btn" href="{{ path('file_upload') }}">
                Upload a file
            </a>
        </li>        
    </ul>
    {% endblock %}
